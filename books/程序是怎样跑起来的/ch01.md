# 第 1 章 对程序员来说 CPU 是什么

## 1.1 CPU 的内部结构解析

CPU 和内存是由许多晶体管组成的电子部件，通常称为 IC（Integrated Circuit，集成电路）。

CPU 的内部由寄存器、控制器、运算器和时钟四个部分构成，各部分之间由电流信号相互连通。

寄存器：可用来暂存指令、数据等处理对象，可以将其看作是内存的一种。根据种类的不同，一个 CPU 内部会有 20～100 个寄存器。

控制器：负责把内存上的指令、数据等读入寄存器，并根据指令的执行结果来控制整个计算机。

运算器：负责运算从内存读入寄存器的数据。

时钟：负责发出 CPU 开始计时的时钟信号。

## 1.2 CPU 是寄存器的集合体

程序是把寄存器作为对象来描述的。

汇编语言采用助记符（memonic）来编写程序，每一个原本是电气信号的机器语言指令都会有一个与其相应的助记符，助记符通常为指令功能的英语单词的简写。例如，mov 和 add 分别是数据的存储（move）和相加（addition）的简写。汇编语言和机器语言基本上是一一对应的。

机器语言是指 CPU 能直接解释和执行的语言。

机器语言级别的程序是通过寄存器来处理的。

寄存器中存储的内容既可以是指令也可以是数据。其中，数据分为“用于运算的数值”和“表示内存地址的数值”两种。

CPU 是具有各种功能的寄存器的集合体。

## 1.3 决定程序流程的程序计数器

程序计数器是 CPU 寄存器的一种。

程序计数器决定着程序的流程。

## 1.4 条件分支和循环机制

顺序执行：按照地址内容的顺序执行指令。

条件分支：根据条件执行任意地址的指令。

循环：重复执行同一地址的指令。

## 1.5 函数的调用机制

函数调用使用的是 `call` 指令，而不是跳转指令。在将函数的入口地址设定到程序计数器之前，`call` 指令会把调用函数后要执行的指令地址存储在名为栈的主存内。函数处理完毕后，再通过函数的出口来执行 `return` 指令。`return` 指令的功能是把保存在栈中的地址设定到程序计数器中。

## 1.6 通过地址和索引实现数组

实际地址 = 基址寄存器的值（固定）+ 变址寄存器的值

## 1.7 CPU 的处理其实很简单

机器语言指令的主要类型和功能

- 数据转送指令：寄存器和内存、内存和内存、寄存器和外围设备之间的数据读写操作

- 运算指令：用累加寄存器执行算术运算、逻辑运算、比较运算和移位运算

- 跳转指令：实现条件分支、循环、强制跳转等

- `call`/`return` 指令：函数的调用/返回调用前的地址
